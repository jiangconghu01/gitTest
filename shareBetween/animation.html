<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Examples</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<style type="text/css">
	*{
		margin:0;
		padding:0;
	}
	html,body{
		width: 100%;
		height:100%;
	}
	body{
		position: relative;
	}
	.head{
		width:100%;
		height: 200px;
		background-color:rgba(255,255,255,0);
		position: absolute;
		color:red;
		text-align: center;

	}

	canvas{
		display: block;
		/*vertical-align: middle;*/
		background:#000;
		width: 100%;
		height: 200px;
		position:absolute;
	}
</style>
</head>
<body>
    <canvas id="canvas">你的浏览器不支持canvas</canvas>
    <div class="head">
    	音乐网站
    </div>
    <script type="text/javascript">
    	const can=document.querySelector('#canvas');
    	const ctx=can.getContext("2d");
    	let w=can.width=window.innerWidth;
    	//let h=can.height=window.innerHeight;
    	let h =can.height=100;
    	window.addEventListener('onresize',function(){
    		console.log(w);
    		let w=can.width=window.innerWidth;
    		//let h=can.height=window.innerHeight;
    	});

    	/*ctx.fillStyle="red";
    	ctx.fillRect(100,100,100,100);

    	ctx.arc(250,250,50,0,Math.PI*2,false);
    	ctx.strokeStyle="red";
    	ctx.stroke();

    	let y=0;
    	setInterval(function(){
    		y++;
    		ctx.clearRect(0,0,w,h);
    		ctx.fillRect(100,y,100,100);
    	}, 30)*/
    	/*class Drop(){
    		constructor(){
    			this.x=
    		}
    	}*/
    	
    	function Drop(){};
    	Drop.prototype={
    		init:function(){
    			this.x=rand(0,w);
    			this.y=0;
    			this.ySpeed=rand(5,6);
    			this.maxH=rand(0.7*h,0.9*h);
    			this.r=1;
    			this.a=1;
    			this.rSpeed=1;
    			this.aSpeed=1;
    		},
    		draw:function(){
    			if(this.y>this.maxH){
    				ctx.beginPath();
    				ctx.lineWidth=1;
    				ctx.arc(this.x,this.y,this.r,Math.PI*2,false);
    				ctx.strokeStyle=`rgba(0,255,255,${this.aSpeed})`;
    				ctx.stroke();

    			}else{
    				ctx.fillStyle="rgb(0,255,255)";
    				ctx.fillRect(this.x,this.y,2,10);
    				
    			}
    			this.update();
    		},
    		update:function(){
    			if(this.y>this.maxH){
    				this.r+=this.rSpeed;
    				if(this.aSpeed>0.03 ){
    					this.aSpeed*=0.95;
    				}else{
    					this.init();
    				}
    			}else{
    				this.y+=this.ySpeed;  			
    			}
    		}
    	};

    	function rand(min,max){
    		return Math.random()*(max-min)+min;
    	}
    	let drops=[];
    	for (let i = 0; i < 25; i++) {
    		setTimeout(function(){
    			let drop=new Drop();
    			drop.init();
    			drops.push(drop);
    		}, 150*i);
    	}
    	setInterval(function(){
    		//ctx.clearRect(0,0,w,h);
    		ctx.fillStyle="rgba(0,0,0,0.1)";
    		ctx.fillRect(0,0,w,h);
    		for (let i = 0; i < drops.length; i++) {
    		drops[i].draw();
    		}	
    	}, 20);
    </script>
</body>
</html>